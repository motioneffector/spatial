<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>@motioneffector/spatial - Demo</title>
  <link rel="stylesheet" href="demo-files/styles.css">
</head>
<body>
  <!-- Demo status banner (shows during automated demo) -->
  <div class="demo-status" id="demo-status"></div>

  <div class="page">
    <header class="header">
      <h1 class="header-title">@motioneffector/spatial</h1>
      <p class="header-description">Directional graph for room-based spatial navigation</p>
      <nav class="header-links">
        <a href="https://www.npmjs.com/package/@motioneffector/spatial" class="header-link" target="_blank">
          üì¶ npm
        </a>
        <a href="https://github.com/motioneffector/spatial" class="header-link" target="_blank">
          üíª GitHub
        </a>
        <a href="https://github.com/motioneffector/spatial/wiki" class="header-link" target="_blank">
          üìñ Manual
        </a>
        <button class="btn btn-secondary btn-small" id="page-reset" style="margin-left: auto;">
          üîÑ Reset Page
        </button>
      </nav>
    </header>

    <main class="exhibits">
      <!-- Exhibit 1: Dungeon Explorer -->
      <section class="exhibit">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Dungeon Explorer</h2>
          <p class="exhibit-description">Navigate through a connected graph with locked doors, keys, and pathfinding. Click rooms to move, collect keys to unlock doors.</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive" id="exhibit-1">
            <div class="dungeon-map" id="dungeon-map"></div>
            <div class="dungeon-controls">
              <div class="compass-rose" id="compass-rose"></div>
              <div class="keyring">
                <div class="keyring-title">Keyring</div>
                <div class="keyring-keys" id="keyring"></div>
              </div>
            </div>
          </div>
          <div class="exhibit-controls">
            <button class="btn btn-secondary" id="dungeon-reset">Reset</button>
            <label class="toggle">
              <input type="checkbox" id="find-path-toggle">
              <span class="toggle-switch"></span>
              <span class="toggle-label">Find Path Mode</span>
            </label>
            <button class="btn btn-secondary" id="reveal-secret">Reveal Secret Passage</button>
          </div>
        </div>
      </section>

      <!-- Exhibit 2: Graph Workshop -->
      <section class="exhibit">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Graph Workshop</h2>
          <p class="exhibit-description">Modify, analyze, and build spatial graphs interactively. Click "Analyze" to see orphans and dead-ends, drag the mini-player to test reachability.</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive" id="exhibit-2">
            <div class="workshop-canvas" id="workshop-canvas"></div>
          </div>
          <div class="exhibit-controls">
            <button class="btn btn-primary" id="workshop-add-node">+ Node</button>
            <button class="btn btn-secondary" id="workshop-analyze">üîç Analyze</button>
            <button class="btn btn-secondary" id="workshop-clear-analysis">Clear Analysis</button>
            <select class="input" id="workshop-examples">
              <option value="">Load Example...</option>
              <option value="minimal">Minimal (3 nodes)</option>
              <option value="dungeon">Dungeon</option>
              <option value="multifloor">Multi-floor</option>
              <option value="disconnected">Disconnected</option>
              <option value="empty">Empty</option>
            </select>
            <button class="btn btn-secondary btn-small" id="workshop-delete-mode">üóë Delete Mode</button>
          </div>
        </div>
      </section>

      <!-- Exhibit 3: Pathfinding Theater -->
      <section class="exhibit">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Pathfinding Theater</h2>
          <p class="exhibit-description">Watch Dijkstra's algorithm find the shortest path step by step. The "obvious" short path has high costs - watch the algorithm find the better route.</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive" id="exhibit-3">
            <div class="pathfinding-graph" id="pathfinding-graph"></div>
            <div class="pf-queue">
              <span class="pf-queue-label">Queue:</span>
              <div class="pf-queue-tokens" id="pf-queue-tokens"></div>
            </div>
          </div>
          <div class="exhibit-controls">
            <button class="btn btn-primary" id="pf-play">‚ñ∂ Play</button>
            <button class="btn btn-secondary" id="pf-step">Step ‚Üí</button>
            <button class="btn btn-secondary" id="pf-reset">Reset</button>
            <div class="speed-slider">
              <span class="text-secondary">Speed:</span>
              <input type="range" id="pf-speed" min="50" max="500" value="200">
            </div>
            <label class="toggle">
              <input type="checkbox" id="pf-has-key">
              <span class="toggle-switch"></span>
              <span class="toggle-label">Has Key</span>
            </label>
            <button class="btn btn-secondary btn-small" id="pf-randomize">Randomize Costs</button>
          </div>
        </div>
      </section>
    </main>

    <footer class="test-runner">
      <div class="test-runner-header">
        <h2 class="test-runner-title">Test Suite</h2>
        <div class="test-runner-actions">
          <button class="btn btn-primary" id="run-tests">Run All Tests</button>
          <button class="btn btn-secondary" id="run-fuzz">Run Fuzz Tests</button>
        </div>
      </div>
      <div class="test-runner-content">
        <div class="test-progress">
          <div class="test-progress-bar">
            <div class="test-progress-fill" id="progress-fill"></div>
          </div>
          <div class="test-progress-text" id="progress-text">Click "Run All Tests" to demo all exhibits and execute the test suite</div>
        </div>
        <div class="test-output" id="test-output">
          <div class="test-output-empty">Click "Run All Tests" to automatically demonstrate all exhibits and then run the full test suite</div>
        </div>
        <div class="test-summary hidden" id="test-summary">
          <div class="test-summary-item passed">
            <span>‚úì</span>
            <span id="passed-count">0</span> passed
          </div>
          <div class="test-summary-item failed">
            <span>‚úó</span>
            <span id="failed-count">0</span> failed
          </div>
          <div class="test-summary-item skipped">
            <span>‚óã</span>
            <span id="skipped-count">0</span> skipped
          </div>
        </div>
      </div>
    </footer>
  </div>

  <script type="module">
    import { initDungeon } from './demo-files/dungeon.js'
    import { initWorkshop } from './demo-files/workshop.js'
    import { initPathfinding } from './demo-files/pathfinding.js'
    import { initTestRunner } from './demo-files/test-runner.js'

    // Initialize all exhibits
    initDungeon()
    initWorkshop()
    initPathfinding()
    initTestRunner()
  </script>
</body>
</html>
